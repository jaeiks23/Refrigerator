<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/cookBoardDetail}">
	  
<div layout:fragment="content">
<div id="writingContainer">
	<div th:if="${cookDetailViewDTO.cookBoard.delcheck.toString()}=='Y'">
		삭제된 게시물입니다.
	</div>
	<div th:if="${cookDetailViewDTO.cookBoard.delcheck.toString()}!='Y'">
		<img th:src="@{/img/notify.png}" th:if="${cookDetailViewDTO.cookBoard.member.id}!=${member.id}" onclick="notifyingMain()" width="50px" height="50px" id="notifyButton">
		
		<div class="buttonContainer" th:if="${member.name.toString()}!='guest'">
			<button type="button" class="reButton" th:if="${cookDetailViewDTO.cookBoard.member.id}==${member.id}" th:onclick="|location.href='@{/cookBoard/CookBoardDetail/rewrite(writingId=${cookDetailViewDTO.cookBoard.writingid})}'|">수정</button>
			<button type="button" class="delButton" th:if="${cookDetailViewDTO.cookBoard.member.id}==${member.id}" th:onclick="|location.href='@{/cookBoard/CookBoardDetail/delete(writingId=${cookDetailViewDTO.cookBoard.writingid})}'|">삭제</button>
		</div>
		<table class="titleBox">
			<tr>
				<td style="text-align: center">
					<h1 th:text="${cookDetailViewDTO.cookBoard.title}"></h1>
				</td>
			</tr>
			<tr>
				<td style="text-align: center" class="seenAndRecom">
					<div class="nick" th:text="${cookDetailViewDTO.cookBoard.member.nickname}"></div>
					<div class="seenCount" th:text="' | '+'조회수 : '+${cookDetailViewDTO.cookBoard.seencount}+' | '"></div>
					<div class="recomCount" th:text="'추천수 : '+${cookDetailViewDTO.cookBoard.recomcount}+' | '" th:value="${cookDetailViewDTO.cookBoard.recomcount}"></div>
					<img th:src="@{/img/goodJob.png}" onclick="recomFunc()" id="goodJob" width="30px" height="30px">
					<div class="regDate" th:text="' | '+${#temporals.format(cookDetailViewDTO.cookBoard.regdate,'yyyy-MM-dd HH:mm')}"></div>
				</td>
			</tr>
		</table>
		
		<div class="contentBox">
		<div class="content"></div>
		</div>
		
		<div class="commentBox">
		<table>
			<tr th:each="comment,i : ${cookDetailViewDTO.cookComment}" class="commentTr">
				<td th:text="${comment.member.nickname}" th:class="'comment'+${i.count}+'memNick comm nickName'" width="250px"></td>
				<td th:text="${comment.content}" th:class="'comment'+${i.count}+'content comm commentContent'" width="835px"></td>
				<td th:text="${#temporals.format(comment.regdate,'yyyy-MM-dd HH:mm')}" class="comm comReg"></td>
				<td th:if="${comment.member.id}==${member.id}"><button type="button" onclick="reComment(this.value)" th:value="'comment'+${i.count}" class="commentExtra">수정</button></td>
				<td th:if="${comment.member.id}==${member.id}"><button type="button" onclick="delFunc(this.value)" th:value="'comment'+${i.count}" class="commentExtra">X</button></td>
				<td><button type="button" onclick="notifyingComment(this.value)" th:value="'comment'+${i.count}" class="commentExtra">신고</button></td>
				<td style="display: none;"><input type="hidden" th:value="${comment.commentid}" th:id="'comment'+${i.count}"></td>
				<td style="display: none;"><input type="hidden" th:value="${comment.member.email}" th:class="'comment'+${i.count}+'memMail'"></td>
			</tr>
		</table>
		</div>
		
			
			<input type="text" id="commentInput" name="content" th:if="${member.name.toString()}=='guest'" placeholder="로그인 후 입력해주세요" readonly="readonly"/>
			<input type="text" id="commentInput" name="content"  th:if="${member.name.toString()}!='guest'" onkeypress="enter()"/>
			<button type="button" id="commentButton" onclick="commentSend()">댓글 입력</button>
			<button type="button" class="backButton" onclick="history.back()">목록으로</button>
			
		<form th:action="@{/Notifying}" method="post" th:object="${notifyingDTO}" target="notifyingPopUp" id="notifying" style="display: none;">
			<input type="hidden" name="title" id="notifiedTitle">
			<input type="hidden" name="content" id="notifiedContent">
			<input type="hidden" name="writingId" id="notifiedWritingId">
			<input type="hidden" name="commentId" id="notifiedCommentId">
			<input type="hidden" name="memMail" id="notifiedMemMail">
			<input type="hidden" name="memNick" id="notifiedMemNick">
			<input type="hidden" name="boardId" id="notifiedBoardId">
		</form>

	</div>	
</div>		
</div>
</html>